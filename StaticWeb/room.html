<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>SemOX-room</title>
  </head>
  <body>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <p id="CCU"></p><br>
    
    <p id="message"></p>
  </body>

  <script>
    function getQueryStringObject() {

    var a = window.location.search.substr(1).split('&');
    if (a == "") return {};
    var b = {};
    for (var i = 0; i < a.length; ++i) {
        var p = a[i].split('=', 2);
        if (p.length == 1)
            b[p[0]] = "";
        else
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
    }
    return b;
    }
    
    var queryString = getQueryStringObject()
    var socketurl = "http://13.125.73.128:3000?room=" + queryString.room
    
    var socket = io(socketurl);
    socket.on('CCU', (msg)=>{
      document.getElementById('CCU').innerHTML = "접속자 수 : " + msg;
    })
    socket.on("GM", function(msg) {
        document.getElementById('message').innerHTML = msg;
    });
    
    

    

    
  </script>
  
</html>